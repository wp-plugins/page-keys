var Plugin=Plugin||{};!function(a,b,c){"use strict";a.Button={initialize:function(){b("a.add-new-h2").on("click",function(b){b.preventDefault(),a.Button.addPageKey()})},addPageKey:function(){var d={_wpnonce:c.nonces.add,action:c.actions.add};b.post(c.url,d,function(c){if(c.success){var d=a.ListTable.$listTable.find("tbody tr").last(),e=b(c.data.row);d.hasClass("alternate")&&e.removeClass("alternate"),d.after(e),e.find("input.page-key").select(),a.Form.$submit.prop("disabled",!1),a.Form.unsavedChanges=!0}else a.Form.$form.before(c.data.errors)})}},b(function(){a.Button.initialize()})}(Plugin,jQuery,tfPageKeysData),function(a,b,c){"use strict";a.Form={initialize:function(){this.unsavedChanges=!1,window.onbeforeunload=function(){return a.Form.unsavedChanges?c.messages.unload:void 0},this.$form=b("#page-keys-form").on("submit",function(){window.onbeforeunload=null}),this.$submit=this.$form.find("#submit").prop("disabled",!0),this.$duplicatesNotice=this.$form.find(".error.inline").hide()},reactOnChanges:function(){this.$submit.prop("disabled",!1),this.unsavedChanges=!0}},b(function(){a.Form.initialize()})}(Plugin,jQuery,tfPageKeysData),function(a,b,c){"use strict";a.ListTable={initialize:function(){this.$listTable=a.Form.$form.find(".wp-list-table.page-keys").on("change","input.page-key",function(){a.ListTable.checkForDuplicates(b(this).val())}).on("click","a.edit",function(c){c.preventDefault(),b(this).closest("td").find("input").prop("readonly",!1).select(),a.Form.reactOnChanges()}).on("change","select",function(){a.Form.reactOnChanges()}).on("click","a.submitdelete",function(b){b.preventDefault(),a.ListTable.deletePageKey(this)}),this.$listTable.find("input.page-key").prop("readonly",!0)},checkForDuplicates:function(c){var d=this.$listTable.find("input.page-key").filter(function(){return b(this).val()===c}),e=d.length>1;d.toggleClass("duplicate",e),a.Form.$submit.prop("disabled",e),a.Form.$duplicatesNotice.toggle(e)},deletePageKey:function(d){if(confirm(c.messages["delete"])){var e={_wpnonce:c.nonces["delete"],action:c.actions["delete"],id:b(d).data("id"),page_key:b(d).closest("td").find("input.page-key").val()};b.post(c.url,e,function(c){a.Form.$form.before(c.data.errors),c.success&&a.ListTable.$listTable.find("a.submitdelete-"+c.data.id).closest("tr").hide("slow",function(){var c=b(d).val();b(d).remove(),a.ListTable.checkForDuplicates(c)}).nextAll().toggleClass("alternate")})}}},b(function(){a.ListTable.initialize()})}(Plugin,jQuery,tfPageKeysData);